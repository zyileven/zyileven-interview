## React Server Components 服务端组件

关于 React 对于渲染的优化，我们了解到 react 的进程如下

**1.CSR 客户端渲染** → **2.SSR 服务端渲染** → **3.Suspense for SSR**

但是我们依旧存在一些问题没有解决：

- 用户下载的 JS 包过大，导致过度下载
- 不必要的水合引起页面交互的推迟
- 繁重的客户端处理导致性能下降

在这样的背景下，React 团队设计出了 RSC 架构，这种方式利用服务器与客户端环境的优势来优化效率、加载时间和交互性。

### RSC（React Server Components）的出现

该架构引入了双组件模型：

- Client Components 客户端组件
- Server Components 服务端组件

这种设计不是基于组件的功能，而是基于他们的执行环境以及他们设计用于交互的特定系统。

### 客户端组件

就是在 RSC 架构出现之前的普通 React 组件。

客户端组件一般在客户端渲染（CSR）也可以在服务端渲染（SSR）为 HTML ，允许用户立即看到 HTML 内容而不是空白页面。

总的来说，客户端组件主要在客户端环境运行，但是如果你相对其进行优化，你也可以在服务端上运行一次。

**独有特点**：客户端组件可以访问客户端的所有环境（浏览器 API，监听，地理位置，本地存储），而服务端组件不行



### 服务端组件

一种专门设计用于操作的新型 React 组件，代码保留在服务器上，永远不会下载到客户端。

#### 服务端组件的好处

- **捆绑包体积更小**：因为代码在服务器上，包括代码的依赖项也是
- **直接访问服务器资源**：服务端组件由于是在服务器上，所以能够直接与服务端资源进行通信，利用服务端的功能和与数据源的接进性来管理计算密集型渲染任务。
- **安全性提升**：由于服务端组件在服务器上运行，所以用到的敏感数据 API keys 或者 tokens 这类的信息不会出现在客户端。
- **数据获取更加智能**：服务端组件允许你将数据获取移动到更靠近数据源的服务器，通过减少获取数据所需事件和客户端需要发出的请求数量来提高性能。
- **缓存**：当在服务端渲染组件时，可以缓存渲染结果，以便于在不同用户之间使用同样的内容，以达到提升性能。
- **初始页面加载与 FCP 指标显著提升**：通过提前在服务端生成 HTML 文件，用户可以立即看到你的内容而无需等待 JS 下载和执行。
- **SEO 搜索引擎优化**：搜索引擎机器人可以轻松读取由服务端生成的 HTML 文件，使网站更容易检索。
- **高效流式传输**：服务端组件能够分割渲染流程到不同的块（chunk）然后流式传输到客户端，可以更快查看页面，而不是等待整个页面在服务器上渲染

> 总结：
>
> 服务端组件处理数据获取和静态渲染，而客户端组件负责渲染交互元素





























































